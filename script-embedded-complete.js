// Territory Management Application with Embedded Data
class TerritoryApp {
    constructor() {
        this.data = {
            "Заиграевская": [
                [
                    "1",
                    36
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    25
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    55
                ],
                [
                    "6",
                    8
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    4
                ],
                [
                    "10",
                    4
                ],
                [
                    "11",
                    4
                ],
                [
                    "12",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "15",
                    4
                ],
                [
                    "17",
                    4
                ],
                [
                    "19",
                    4
                ],
                [
                    "21",
                    8
                ],
                [
                    "22",
                    8
                ],
                [
                    "22/2",
                    8
                ],
                [
                    "23",
                    8
                ],
                [
                    "24",
                    8
                ],
                [
                    "25",
                    8
                ],
                [
                    "26",
                    8
                ],
                [
                    "27",
                    8
                ],
                [
                    "28",
                    8
                ],
                [
                    "29",
                    8
                ],
                [
                    "30",
                    8
                ],
                [
                    "31",
                    8
                ],
                [
                    "32",
                    8
                ],
                [
                    "33",
                    8
                ],
                [
                    "35",
                    48
                ]
            ],
            "Пролетарская": [
                [
                    "1",
                    8
                ],
                [
                    "2",
                    12
                ],
                [
                    "3",
                    8
                ],
                [
                    "4",
                    4
                ],
                [
                    "5",
                    8
                ]
            ],
            "Королёва": [
                [
                    "2",
                    88
                ],
                [
                    "4",
                    60
                ],
                [
                    "6",
                    88
                ],
                [
                    "8",
                    60
                ],
                [
                    "10",
                    65
                ],
                [
                    "12",
                    60
                ],
                [
                    "14",
                    60
                ],
                [
                    "16",
                    80
                ],
                [
                    "18",
                    60
                ],
                [
                    "20",
                    80
                ],
                [
                    "22",
                    70
                ]
            ],
            "Гагарина": [
                [
                    "3",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    8
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    8
                ],
                [
                    "13",
                    100
                ],
                [
                    "14",
                    32
                ],
                [
                    "15",
                    96
                ],
                [
                    "16",
                    22
                ],
                [
                    "16а",
                    12
                ],
                [
                    "16Б",
                    12
                ],
                [
                    "17",
                    32
                ],
                [
                    "18",
                    80
                ],
                [
                    "20",
                    106
                ],
                [
                    "22",
                    52
                ],
                [
                    "26",
                    8
                ],
                [
                    "27к2",
                    173
                ],
                [
                    "27к3",
                    153
                ],
                [
                    "30",
                    31
                ],
                [
                    "31",
                    49
                ],
                [
                    "32",
                    48
                ],
                [
                    "32п",
                    80
                ],
                [
                    "33",
                    54,
                    5
                ],
                [
                    "34",
                    48
                ],
                [
                    "35",
                    30
                ],
                [
                    "36",
                    46
                ],
                [
                    "37",
                    30,
                    5
                ],
                [
                    "38",
                    32
                ],
                [
                    "39",
                    76
                ],
                [
                    "40",
                    32
                ],
                [
                    "41",
                    80
                ],
                [
                    "42",
                    25
                ],
                [
                    "44",
                    16
                ],
                [
                    "46",
                    12
                ],
                [
                    "47",
                    56,
                    3
                ],
                [
                    "48",
                    8
                ],
                [
                    "48а",
                    60
                ],
                [
                    "49",
                    58
                ],
                [
                    "50",
                    8
                ],
                [
                    "51",
                    36
                ],
                [
                    "52",
                    8
                ],
                [
                    "53",
                    60
                ],
                [
                    "54",
                    8
                ],
                [
                    "55",
                    32
                ],
                [
                    "56",
                    12
                ],
                [
                    "57",
                    56
                ],
                [
                    "59",
                    60
                ],
                [
                    "60",
                    32
                ],
                [
                    "61",
                    14
                ],
                [
                    "62",
                    30
                ],
                [
                    "63",
                    16
                ],
                [
                    "64",
                    142
                ],
                [
                    "64а",
                    74
                ],
                [
                    "65",
                    16
                ],
                [
                    "67",
                    26
                ],
                [
                    "67а",
                    12
                ],
                [
                    "69",
                    36
                ],
                [
                    "71",
                    12
                ],
                [
                    "73а",
                    151
                ],
                [
                    "73б",
                    156
                ],
                [
                    "75",
                    40
                ],
                [
                    "75а",
                    60
                ],
                [
                    "77а",
                    160
                ],
                [
                    "77",
                    60
                ],
                [
                    "79",
                    99
                ],
                [
                    "81",
                    159
                ],
                [
                    "83",
                    100
                ],
                [
                    "85",
                    100
                ],
                [
                    "86",
                    8
                ],
                [
                    "87",
                    80
                ],
                [
                    "88",
                    8
                ],
                [
                    "90",
                    8
                ],
                [
                    "92",
                    8
                ]
            ],
            "Добролюбова": [
                [
                    "1",
                    30
                ],
                [
                    "2",
                    60
                ],
                [
                    "3",
                    80
                ],
                [
                    "4",
                    80
                ],
                [
                    "5",
                    64
                ],
                [
                    "6",
                    85
                ],
                [
                    "6а",
                    70
                ],
                [
                    "7",
                    39
                ],
                [
                    "9",
                    39
                ],
                [
                    "10",
                    34
                ],
                [
                    "35",
                    49
                ],
                [
                    "35а",
                    49
                ],
                [
                    "35б",
                    60
                ],
                [
                    "37",
                    75
                ],
                [
                    "37а",
                    53
                ],
                [
                    "37б",
                    66
                ],
                [
                    "37в",
                    20
                ]
            ],
            "Хоца Намсараева": [
                [
                    "2а",
                    103
                ],
                [
                    "2в",
                    42
                ],
                [
                    "2Б",
                    15
                ],
                [
                    "2",
                    80
                ],
                [
                    "4",
                    80
                ],
                [
                    "6",
                    80
                ],
                [
                    "8",
                    80
                ],
                [
                    "30",
                    80
                ]
            ],
            "Чайковского": [
                [
                    "3а",
                    60
                ],
                [
                    "4",
                    60
                ],
                [
                    "6",
                    52
                ],
                [
                    "9",
                    120
                ],
                [
                    "10",
                    48
                ],
                [
                    "11",
                    16
                ],
                [
                    "12",
                    52
                ],
                [
                    "13",
                    60
                ],
                [
                    "14",
                    48
                ],
                [
                    "16",
                    48
                ],
                [
                    "18",
                    60
                ],
                [
                    "20",
                    48
                ],
                [
                    "22",
                    8
                ],
                [
                    "24",
                    8
                ],
                [
                    "26",
                    8
                ],
                [
                    "28",
                    8
                ]
            ],
            "Октябрьская": [
                [
                    "1",
                    70
                ],
                [
                    "1а",
                    80
                ],
                [
                    "1Б",
                    50
                ],
                [
                    "2а",
                    62,
                    5
                ],
                [
                    "4",
                    32
                ],
                [
                    "5",
                    119
                ],
                [
                    "6",
                    48
                ],
                [
                    "7",
                    60
                ],
                [
                    "7а",
                    60
                ],
                [
                    "8",
                    48
                ],
                [
                    "9",
                    44
                ],
                [
                    "10",
                    80
                ],
                [
                    "10а",
                    60
                ],
                [
                    "10в",
                    43
                ],
                [
                    "11",
                    48
                ],
                [
                    "12",
                    48
                ],
                [
                    "13",
                    35
                ],
                [
                    "14",
                    40
                ],
                [
                    "15",
                    79
                ],
                [
                    "16",
                    116
                ],
                [
                    "17",
                    7
                ],
                [
                    "17а",
                    32
                ],
                [
                    "18",
                    60
                ],
                [
                    "18а",
                    60
                ],
                [
                    "19",
                    134
                ],
                [
                    "20",
                    60
                ],
                [
                    "20а",
                    60
                ],
                [
                    "21",
                    104
                ],
                [
                    "22",
                    40
                ],
                [
                    "23",
                    40
                ],
                [
                    "24",
                    40
                ],
                [
                    "25",
                    80
                ],
                [
                    "26",
                    40
                ],
                [
                    "27",
                    80
                ],
                [
                    "28",
                    40
                ],
                [
                    "30",
                    58
                ],
                [
                    "32",
                    54
                ],
                [
                    "33а",
                    8
                ],
                [
                    "33",
                    53
                ],
                [
                    "34",
                    40
                ],
                [
                    "36",
                    60
                ],
                [
                    "37",
                    75
                ],
                [
                    "38",
                    64
                ],
                [
                    "39",
                    78
                ],
                [
                    "40",
                    32
                ],
                [
                    "41",
                    80
                ],
                [
                    "43",
                    80
                ],
                [
                    "44",
                    80
                ],
                [
                    "45",
                    160
                ],
                [
                    "46",
                    80
                ]
            ],
            "Радикальцева": [
                [
                    "2",
                    80
                ],
                [
                    "4",
                    80
                ]
            ],
            "Чкалова": [
                [
                    "1",
                    28
                ],
                [
                    "3",
                    28
                ],
                [
                    "5",
                    60
                ],
                [
                    "6",
                    120
                ],
                [
                    "9",
                    60
                ],
                [
                    "11",
                    60
                ],
                [
                    "12",
                    68
                ],
                [
                    "13",
                    87
                ],
                [
                    "14",
                    80
                ],
                [
                    "15",
                    87
                ],
                [
                    "17",
                    80
                ],
                [
                    "18",
                    80
                ],
                [
                    "19",
                    80
                ],
                [
                    "21",
                    110
                ],
                [
                    "23а",
                    57
                ]
            ],
            "Хахалова": [
                [
                    "2",
                    90
                ],
                [
                    "3",
                    60
                ],
                [
                    "5",
                    60
                ],
                [
                    "6",
                    60
                ],
                [
                    "8",
                    34
                ],
                [
                    "9",
                    8
                ],
                [
                    "10а",
                    12
                ],
                [
                    "11",
                    8
                ],
                [
                    "12",
                    24
                ],
                [
                    "13",
                    8
                ],
                [
                    "14",
                    24
                ],
                [
                    "16Б",
                    8
                ],
                [
                    "21",
                    8
                ],
                [
                    "25",
                    8
                ]
            ],
            "Комсомольская": [
                [
                    "1",
                    80
                ],
                [
                    "1в",
                    84
                ],
                [
                    "2",
                    68
                ],
                [
                    "2а",
                    80
                ],
                [
                    "3а",
                    75
                ],
                [
                    "4",
                    98
                ],
                [
                    "6а",
                    60
                ],
                [
                    "6в",
                    63
                ],
                [
                    "8а",
                    60
                ],
                [
                    "10",
                    49
                ],
                [
                    "12",
                    32
                ],
                [
                    "15",
                    12
                ],
                [
                    "16",
                    124
                ],
                [
                    "17",
                    12
                ],
                [
                    "18",
                    32,
                    3
                ],
                [
                    "19",
                    12
                ],
                [
                    "21",
                    32
                ],
                [
                    "23",
                    32
                ],
                [
                    "24",
                    12
                ],
                [
                    "25",
                    32
                ],
                [
                    "26",
                    12
                ],
                [
                    "27",
                    32
                ],
                [
                    "28а",
                    48
                ],
                [
                    "28",
                    12
                ],
                [
                    "30",
                    12
                ],
                [
                    "32",
                    12
                ],
                [
                    "33",
                    183
                ],
                [
                    "34",
                    12
                ],
                [
                    "35",
                    80
                ],
                [
                    "36",
                    12
                ],
                [
                    "37",
                    33
                ],
                [
                    "38",
                    12
                ],
                [
                    "39",
                    93
                ],
                [
                    "40",
                    20
                ],
                [
                    "42",
                    80
                ],
                [
                    "44",
                    80
                ]
            ],
            "Камова": [
                [
                    "1",
                    78
                ],
                [
                    "3",
                    80
                ],
                [
                    "5",
                    80
                ],
                [
                    "9",
                    110
                ],
                [
                    "11",
                    80
                ],
                [
                    "15",
                    130
                ],
                [
                    "17",
                    80
                ],
                [
                    "19",
                    56
                ]
            ],
            "Туполева": [
                [
                    "1",
                    110
                ],
                [
                    "2",
                    80
                ],
                [
                    "3",
                    110
                ],
                [
                    "4",
                    80
                ],
                [
                    "5",
                    56
                ],
                [
                    "6",
                    60
                ],
                [
                    "7",
                    56
                ],
                [
                    "8",
                    84
                ],
                [
                    "9",
                    56
                ],
                [
                    "10",
                    90
                ],
                [
                    "12",
                    80
                ],
                [
                    "13",
                    65
                ],
                [
                    "14",
                    60
                ],
                [
                    "15",
                    150
                ],
                [
                    "16",
                    170
                ],
                [
                    "16а",
                    80
                ],
                [
                    "17",
                    130,
                    17
                ],
                [
                    "18",
                    60
                ],
                [
                    "18а",
                    60
                ],
                [
                    "19",
                    130
                ],
                [
                    "19а",
                    64
                ],
                [
                    "20",
                    79
                ],
                [
                    "20а",
                    51
                ],
                [
                    "23",
                    53
                ],
                [
                    "23а",
                    111
                ]
            ],
            "Антонова": [
                [
                    "2",
                    85
                ],
                [
                    "4",
                    110
                ],
                [
                    "5",
                    50
                ],
                [
                    "6",
                    80
                ],
                [
                    "12",
                    98
                ],
                [
                    "14",
                    60
                ],
                [
                    "16",
                    60
                ],
                [
                    "18",
                    60
                ],
                [
                    "19",
                    36
                ],
                [
                    "20",
                    36
                ],
                [
                    "22",
                    36
                ],
                [
                    "23",
                    30
                ],
                [
                    "24",
                    100
                ],
                [
                    "26",
                    160
                ]
            ],
            "Яковлева": [
                [
                    "1",
                    90
                ],
                [
                    "3",
                    36
                ],
                [
                    "5",
                    36
                ],
                [
                    "7",
                    110
                ],
                [
                    "10",
                    140
                ],
                [
                    "13",
                    150
                ],
                [
                    "17",
                    110
                ]
            ],
            "Микояна": [
                [
                    "1",
                    80
                ],
                [
                    "3",
                    80
                ],
                [
                    "5",
                    60
                ],
                [
                    "7",
                    119
                ]
            ],
            "Комарова": [
                [
                    "1",
                    8
                ],
                [
                    "2",
                    12
                ],
                [
                    "3",
                    8
                ],
                [
                    "3а",
                    8
                ],
                [
                    "3Б",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    16
                ],
                [
                    "7",
                    8
                ],
                [
                    "8",
                    80
                ],
                [
                    "8а",
                    20
                ],
                [
                    "9",
                    60
                ],
                [
                    "11",
                    60
                ],
                [
                    "13",
                    60
                ],
                [
                    "15",
                    60
                ],
                [
                    "16",
                    120
                ],
                [
                    "17",
                    78
                ],
                [
                    "19",
                    78
                ],
                [
                    "21",
                    58
                ],
                [
                    "25",
                    62
                ],
                [
                    "25Б",
                    42
                ]
            ],
            "Проспект 50-летия Октября": [
                [
                    "1",
                    109
                ],
                [
                    "2/1",
                    208
                ],
                [
                    "3",
                    40
                ],
                [
                    "4",
                    100
                ],
                [
                    "5",
                    56
                ],
                [
                    "6",
                    80
                ],
                [
                    "8",
                    32
                ],
                [
                    "10",
                    32
                ],
                [
                    "11",
                    48
                ],
                [
                    "14",
                    32
                ],
                [
                    "15",
                    80
                ],
                [
                    "16",
                    32
                ],
                [
                    "17",
                    80
                ],
                [
                    "19",
                    80
                ],
                [
                    "20",
                    84
                ],
                [
                    "21",
                    57
                ],
                [
                    "21Б",
                    21
                ],
                [
                    "22",
                    60
                ],
                [
                    "23",
                    80
                ],
                [
                    "24",
                    40
                ],
                [
                    "25",
                    120
                ],
                [
                    "25а",
                    60
                ],
                [
                    "26",
                    36
                ],
                [
                    "27",
                    68
                ],
                [
                    "30",
                    60
                ],
                [
                    "32",
                    60
                ],
                [
                    "34",
                    60
                ],
                [
                    "36",
                    80
                ],
                [
                    "38",
                    33,
                    5
                ],
                [
                    "40",
                    38
                ],
                [
                    "42",
                    60
                ],
                [
                    "44",
                    60
                ],
                [
                    "46",
                    62,
                    2
                ],
                [
                    "48",
                    60,
                    3
                ],
                [
                    "50а",
                    55
                ],
                [
                    "52",
                    60
                ]
            ],
            "Революции 1905 года": [
                [
                    "3",
                    32
                ],
                [
                    "9",
                    16
                ],
                [
                    "12",
                    80
                ],
                [
                    "14",
                    120
                ],
                [
                    "16",
                    73
                ],
                [
                    "32",
                    113
                ],
                [
                    "32а",
                    118
                ],
                [
                    "38",
                    86
                ],
                [
                    "42",
                    117,
                    2
                ],
                [
                    "68",
                    249
                ],
                [
                    "82",
                    9,
                    3
                ],
                [
                    "84",
                    6
                ],
                [
                    "96",
                    100
                ],
                [
                    "98",
                    111
                ],
                [
                    "102",
                    152
                ],
                [
                    "104а",
                    111
                ],
                [
                    "104",
                    80
                ],
                [
                    "104Б",
                    56
                ]
            ],
            "Гарнаева": [
                [
                    "2",
                    16
                ],
                [
                    "4",
                    16
                ],
                [
                    "6",
                    16
                ],
                [
                    "8",
                    8
                ],
                [
                    "10",
                    8
                ],
                [
                    "12",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "14",
                    8
                ],
                [
                    "15",
                    8
                ],
                [
                    "16",
                    8
                ],
                [
                    "17",
                    8
                ],
                [
                    "18",
                    8
                ],
                [
                    "19",
                    12
                ],
                [
                    "20",
                    36
                ],
                [
                    "21",
                    16
                ],
                [
                    "22",
                    8
                ],
                [
                    "23",
                    12
                ],
                [
                    "24",
                    8
                ],
                [
                    "25",
                    12
                ],
                [
                    "26",
                    12
                ],
                [
                    "27",
                    12
                ],
                [
                    "28",
                    12
                ],
                [
                    "29",
                    8
                ],
                [
                    "30",
                    16
                ],
                [
                    "31",
                    8
                ],
                [
                    "32",
                    12
                ],
                [
                    "33",
                    12
                ],
                [
                    "35",
                    8
                ]
            ],
            "Краснодонская": [
                [
                    "1",
                    12
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    12
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    12
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    12
                ],
                [
                    "8",
                    8
                ],
                [
                    "19",
                    60
                ],
                [
                    "21",
                    60
                ],
                [
                    "23",
                    60
                ]
            ],
            "Севастопольская": [
                [
                    "4",
                    15
                ],
                [
                    "4а",
                    44
                ],
                [
                    "5",
                    12
                ],
                [
                    "6",
                    8
                ],
                [
                    "6а",
                    44
                ],
                [
                    "7",
                    4
                ],
                [
                    "8",
                    8
                ],
                [
                    "8а",
                    40
                ],
                [
                    "9",
                    4
                ],
                [
                    "10",
                    8
                ],
                [
                    "10а",
                    42
                ],
                [
                    "11",
                    4
                ],
                [
                    "12",
                    8
                ],
                [
                    "12а",
                    39
                ],
                [
                    "14",
                    4
                ],
                [
                    "14а",
                    44
                ],
                [
                    "16",
                    12
                ],
                [
                    "16а",
                    12
                ]
            ],
            "Герцена": [
                [
                    "1",
                    8
                ],
                [
                    "3",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "7",
                    80
                ],
                [
                    "9",
                    80
                ],
                [
                    "11",
                    80
                ],
                [
                    "13",
                    80
                ]
            ],
            "Гастелло": [
                [
                    "3",
                    38
                ],
                [
                    "4",
                    66
                ],
                [
                    "5",
                    34
                ],
                [
                    "6",
                    36
                ],
                [
                    "7",
                    37
                ],
                [
                    "8",
                    32
                ],
                [
                    "10",
                    52
                ],
                [
                    "12",
                    60
                ],
                [
                    "15",
                    28
                ]
            ],
            "Хоринская": [
                [
                    "1/1",
                    8
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "8",
                    8
                ]
            ],
            "Поселок Зеленый": [
                [
                    "1",
                    109
                ],
                [
                    "1а",
                    85
                ],
                [
                    "2",
                    40,
                    2
                ],
                [
                    "3",
                    40
                ],
                [
                    "5",
                    72
                ],
                [
                    "7",
                    40
                ],
                [
                    "9",
                    80
                ]
            ],
            "Цивилева": [
                [
                    "4",
                    12
                ],
                [
                    "5",
                    16
                ],
                [
                    "7",
                    16
                ],
                [
                    "12",
                    58
                ],
                [
                    "27",
                    115
                ],
                [
                    "27а",
                    44
                ],
                [
                    "28",
                    8
                ],
                [
                    "29",
                    60
                ],
                [
                    "30",
                    12
                ],
                [
                    "31",
                    58
                ],
                [
                    "32",
                    153
                ],
                [
                    "32а",
                    122
                ],
                [
                    "33",
                    60
                ],
                [
                    "34",
                    99
                ],
                [
                    "35",
                    80
                ],
                [
                    "38",
                    8
                ],
                [
                    "38п",
                    8
                ],
                [
                    "40",
                    8
                ],
                [
                    "40п",
                    8
                ],
                [
                    "42",
                    169
                ],
                [
                    "44",
                    12
                ],
                [
                    "44п",
                    12
                ],
                [
                    "46",
                    12
                ],
                [
                    "46п",
                    12
                ],
                [
                    "48",
                    12
                ],
                [
                    "48п",
                    69
                ],
                [
                    "50",
                    55,
                    2
                ]
            ],
            "Пушкина": [
                [
                    "3",
                    8
                ],
                [
                    "3а",
                    16
                ],
                [
                    "4",
                    75
                ],
                [
                    "5",
                    30
                ],
                [
                    "10",
                    56,
                    2
                ],
                [
                    "12",
                    80
                ],
                [
                    "12п",
                    80
                ],
                [
                    "14",
                    80
                ],
                [
                    "16",
                    80
                ],
                [
                    "18",
                    139
                ],
                [
                    "18",
                    240,
                    201
                ],
                [
                    "18",
                    440,
                    301
                ],
                [
                    "19",
                    80
                ],
                [
                    "23",
                    120
                ],
                [
                    "24",
                    60
                ],
                [
                    "24а",
                    112
                ],
                [
                    "33",
                    80
                ],
                [
                    "33п",
                    80
                ],
                [
                    "35",
                    100
                ],
                [
                    "35",
                    150,
                    144
                ],
                [
                    "35а",
                    68
                ]
            ],
            "Жуковского": [
                [
                    "2",
                    80
                ],
                [
                    "5",
                    80
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    80
                ],
                [
                    "8",
                    18
                ],
                [
                    "10",
                    12
                ],
                [
                    "12",
                    16
                ],
                [
                    "14",
                    8
                ],
                [
                    "16",
                    8
                ],
                [
                    "18",
                    8
                ],
                [
                    "20",
                    8
                ],
                [
                    "21",
                    40
                ],
                [
                    "22",
                    8
                ],
                [
                    "23",
                    80
                ],
                [
                    "24",
                    8
                ],
                [
                    "25",
                    78
                ],
                [
                    "26",
                    16
                ],
                [
                    "30",
                    8
                ],
                [
                    "32",
                    8
                ],
                [
                    "34",
                    8
                ],
                [
                    "36",
                    8
                ],
                [
                    "38",
                    8
                ]
            ],
            "Лимонова": [
                [
                    "1",
                    30
                ],
                [
                    "2",
                    80
                ],
                [
                    "3а",
                    8
                ],
                [
                    "4",
                    80
                ],
                [
                    "6",
                    80
                ],
                [
                    "8",
                    70
                ],
                [
                    "8а",
                    35
                ],
                [
                    "10",
                    105
                ],
                [
                    "12",
                    105
                ],
                [
                    "14",
                    105
                ]
            ],
            "Буйко": [
                [
                    "1",
                    12
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    12
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    12
                ],
                [
                    "5а",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    14
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    18
                ],
                [
                    "10",
                    8
                ],
                [
                    "11",
                    18
                ],
                [
                    "12",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "14",
                    15
                ],
                [
                    "15",
                    18
                ],
                [
                    "16",
                    15
                ],
                [
                    "17",
                    61
                ],
                [
                    "18",
                    12
                ],
                [
                    "19",
                    60
                ],
                [
                    "20а",
                    134
                ],
                [
                    "21а",
                    58
                ],
                [
                    "22",
                    24
                ],
                [
                    "23а",
                    60
                ],
                [
                    "24",
                    12
                ],
                [
                    "25а",
                    60
                ],
                [
                    "26",
                    12
                ],
                [
                    "27",
                    60
                ],
                [
                    "28",
                    12
                ],
                [
                    "28а",
                    26
                ],
                [
                    "30",
                    12
                ],
                [
                    "31",
                    30,
                    2
                ],
                [
                    "32",
                    45
                ],
                [
                    "33",
                    12
                ],
                [
                    "34",
                    69
                ],
                [
                    "35",
                    31
                ],
                [
                    "36",
                    32
                ],
                [
                    "37",
                    8
                ],
                [
                    "38",
                    16
                ],
                [
                    "39",
                    27
                ]
            ],
            "Иванова": [
                [
                    "1",
                    8
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    8
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    8
                ],
                [
                    "9а",
                    12
                ],
                [
                    "10",
                    8
                ],
                [
                    "11",
                    8
                ],
                [
                    "12",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "14",
                    8
                ],
                [
                    "15",
                    8
                ],
                [
                    "16",
                    8
                ],
                [
                    "17",
                    8
                ],
                [
                    "18",
                    8
                ],
                [
                    "19",
                    160
                ],
                [
                    "20",
                    8
                ]
            ],
            "Маяковского": [
                [
                    "1",
                    80
                ],
                [
                    "1Б",
                    177
                ],
                [
                    "3",
                    11
                ],
                [
                    "3",
                    191,
                    48
                ],
                [
                    "5",
                    164
                ]
            ],
            "Балдынова": [
                [
                    "1",
                    16
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    59
                ],
                [
                    "4",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    20
                ],
                [
                    "8",
                    4
                ],
                [
                    "9",
                    8
                ],
                [
                    "10",
                    8
                ],
                [
                    "11",
                    8
                ],
                [
                    "12",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "14",
                    4
                ],
                [
                    "15",
                    8
                ],
                [
                    "17",
                    8
                ],
                [
                    "19",
                    8
                ],
                [
                    "21",
                    8
                ],
                [
                    "23",
                    8
                ]
            ],
            "Клыпина": [
                [
                    "7",
                    16
                ],
                [
                    "9",
                    16
                ],
                [
                    "10",
                    80
                ],
                [
                    "11",
                    16
                ],
                [
                    "13",
                    16
                ],
                [
                    "14",
                    80
                ],
                [
                    "15",
                    29
                ],
                [
                    "16а",
                    80,
                    42
                ],
                [
                    "16Б",
                    65
                ],
                [
                    "17",
                    12
                ],
                [
                    "18",
                    107
                ],
                [
                    "19",
                    27
                ],
                [
                    "21",
                    12
                ],
                [
                    "22",
                    70
                ],
                [
                    "23",
                    38
                ],
                [
                    "24",
                    24
                ],
                [
                    "24п",
                    24
                ]
            ],
            "Путейская": [
                [
                    "1",
                    60
                ],
                [
                    "2",
                    59
                ],
                [
                    "3",
                    63
                ],
                [
                    "4",
                    88
                ],
                [
                    "5",
                    70
                ],
                [
                    "6",
                    65
                ],
                [
                    "14",
                    12
                ],
                [
                    "16",
                    11
                ]
            ],
            "Шульца": [
                [
                    "2",
                    96
                ],
                [
                    "4",
                    100
                ],
                [
                    "6",
                    100
                ]
            ],
            "Чертенкова": [
                [
                    "1",
                    80
                ],
                [
                    "2",
                    80
                ],
                [
                    "6",
                    112
                ],
                [
                    "8",
                    80
                ],
                [
                    "8а",
                    90
                ],
                [
                    "49",
                    111
                ],
                [
                    "51",
                    175
                ],
                [
                    "53",
                    80
                ],
                [
                    "53а",
                    67
                ],
                [
                    "90",
                    8
                ],
                [
                    "92",
                    8
                ],
                [
                    "94",
                    8
                ],
                [
                    "96",
                    8
                ],
                [
                    "98",
                    8
                ],
                [
                    "100",
                    8
                ],
                [
                    "102",
                    8
                ],
                [
                    "102а",
                    5
                ],
                [
                    "102в",
                    8
                ],
                [
                    "119",
                    8
                ],
                [
                    "121",
                    8
                ],
                [
                    "123",
                    8
                ],
                [
                    "125",
                    8
                ],
                [
                    "127",
                    8
                ],
                [
                    "127п",
                    8
                ],
                [
                    "127а",
                    8
                ],
                [
                    "129",
                    8
                ],
                [
                    "129п",
                    8
                ],
                [
                    "131",
                    8
                ],
                [
                    "131п",
                    8
                ],
                [
                    "133",
                    8
                ],
                [
                    "133п",
                    8
                ],
                [
                    "135",
                    8
                ],
                [
                    "135п",
                    8
                ],
                [
                    "137",
                    8
                ],
                [
                    "137а",
                    8
                ],
                [
                    "139",
                    8
                ],
                [
                    "141",
                    8
                ],
                [
                    "143",
                    8
                ],
                [
                    "143а",
                    8
                ],
                [
                    "145",
                    8
                ],
                [
                    "147",
                    8
                ],
                [
                    "149",
                    8
                ],
                [
                    "149а",
                    8
                ]
            ],
            "Рылеева": [
                [
                    "1",
                    60
                ],
                [
                    "3",
                    60
                ],
                [
                    "5",
                    80
                ],
                [
                    "7",
                    80
                ],
                [
                    "37",
                    80
                ]
            ],
            "Гольдсобеля": [
                [
                    "4",
                    80
                ]
            ],
            "Сенчихина": [
                [
                    "1",
                    120
                ],
                [
                    "2",
                    120
                ],
                [
                    "18",
                    80
                ],
                [
                    "20",
                    80
                ],
                [
                    "27",
                    59
                ]
            ],
            "Коллективная": [
                [
                    "1",
                    8
                ],
                [
                    "2",
                    8
                ],
                [
                    "3",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    8
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    8
                ],
                [
                    "10",
                    8
                ],
                [
                    "11",
                    80
                ],
                [
                    "13",
                    60
                ],
                [
                    "14",
                    8
                ],
                [
                    "16",
                    8
                ],
                [
                    "18",
                    8
                ],
                [
                    "20",
                    8
                ],
                [
                    "22",
                    8
                ]
            ],
            "3 Интернационала": [
                [
                    "18",
                    8
                ],
                [
                    "18а",
                    8
                ],
                [
                    "20",
                    8
                ],
                [
                    "20а",
                    8
                ],
                [
                    "22",
                    8
                ],
                [
                    "24",
                    8
                ],
                [
                    "26",
                    8
                ],
                [
                    "26а",
                    8
                ]
            ],
            "Садовая": [
                [
                    "2",
                    8
                ],
                [
                    "3",
                    8
                ],
                [
                    "4",
                    8
                ],
                [
                    "5",
                    8
                ],
                [
                    "6",
                    8
                ],
                [
                    "7",
                    8
                ],
                [
                    "8",
                    8
                ],
                [
                    "9",
                    8
                ],
                [
                    "10",
                    8
                ]
            ],
            "Пестеля": [
                [
                    "8",
                    56
                ]
            ],
            "Московская": [
                [
                    "1",
                    64
                ],
                [
                    "4",
                    80
                ],
                [
                    "12",
                    51
                ]
            ],
            "Пионерская": [
                [
                    "17",
                    61
                ],
                [
                    "20Б",
                    82
                ],
                [
                    "20",
                    8
                ]
            ],
            "Шаляпина": [
                [
                    "1",
                    8
                ],
                [
                    "1а",
                    18
                ],
                [
                    "2а",
                    18
                ],
                [
                    "3а",
                    18
                ],
                [
                    "5а",
                    24
                ],
                [
                    "5Б",
                    24
                ],
                [
                    "9",
                    8
                ],
                [
                    "9а",
                    8
                ],
                [
                    "11",
                    8
                ],
                [
                    "13",
                    8
                ],
                [
                    "15",
                    8
                ],
                [
                    "15а",
                    8
                ],
                [
                    "17",
                    8
                ],
                [
                    "19",
                    8
                ],
                [
                    "21",
                    16
                ],
                [
                    "21а",
                    41
                ],
                [
                    "23",
                    16
                ],
                [
                    "23а",
                    8
                ],
                [
                    "25",
                    16
                ]
            ],
            "Сосновая": [
                [
                    "14",
                    115
                ],
                [
                    "14а",
                    56
                ],
                [
                    "16",
                    79
                ],
                [
                    "16а",
                    130
                ]
            ]
        };

        this.apartmentCount = 0;
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.generateApartmentButtons();
        this.displayStreets();
    }

    setupEventListeners() {
        // Global functions for onclick handlers
        window.listStreets = () => this.displayStreets();
        window.copyDivToClipboard = () => this.copyToClipboard();

        // Modal functions
        window.openStreetModal = (streetName) => {
            const modal = document.getElementById("exampleModal");
            modal.querySelector(".modal-title").textContent = streetName;
            modal.querySelector(".modal-body input").value = streetName;
            openModal();
        };
    }

    generateApartmentButtons() {
        const container = document.getElementById("apartment-buttons");
        if (!container) return;

        const fragment = document.createDocumentFragment();

        for (let i = 1; i <= 20; i++) {
            const button = document.createElement("button");
            button.type = "button";
            button.className = "btn btn-secondary";
            button.textContent = i.toString();
            button.onclick = () => this.searchApartments(i);
            fragment.appendChild(button);
        }

        container.appendChild(fragment);
    }

    displayStreets() {
        const streets = this.getSortedStreets();
        const streetButtons = streets.map(streetName =>
            `<br><button type="button" class="btn btn-link" onclick="openStreetModal('${streetName}')">${streetName}</button>`
        ).join('');

        document.getElementById("territory").innerHTML = `<div>${streetButtons}</div>`;
    }

    getSortedStreets() {
        return Object.keys(this.data)
            .sort((a, b) => a.localeCompare(b, 'ru', { sensitivity: 'base' }));
    }

    searchApartments(apartmentNumber) {
        this.apartmentCount = 0;
        const streetName = document.getElementById("recipient-name").value;

        if (!streetName || !this.data[streetName]) {
            this.showNoResults();
            return;
        }

        const buildings = this.getFilteredBuildings(streetName);
        const resultHtml = this.generateResultsHtml(apartmentNumber, buildings, streetName);

        this.displayResults(resultHtml);
        this.closeModal();
    }

    getFilteredBuildings(streetName) {
        const buildings = this.data[streetName] || [];
        const isOddChecked = document.getElementById("odd").checked;
        const isEvenChecked = document.getElementById("even").checked;

        if (!isOddChecked && !isEvenChecked) {
            return this.sortBuildings(buildings);
        }

        return this.sortBuildings(buildings.filter(building => {
            const buildingNumber = this.extractBuildingNumber(building[0]);
            if (isOddChecked && buildingNumber % 2 !== 1) return false;
            if (isEvenChecked && buildingNumber % 2 !== 0) return false;
            return true;
        }));
    }

    sortBuildings(buildings) {
        return buildings.sort((a, b) => {
            const numA = this.extractBuildingNumber(a[0]);
            const numB = this.extractBuildingNumber(b[0]);
            return numA - numB;
        });
    }

    extractBuildingNumber(buildingStr) {
        const match = buildingStr.match(/\d+/);
        return match ? parseInt(match[0]) : 0;
    }

    generateResultsHtml(apartmentNumber, buildings, streetName) {
        let html = this.getResultsHeader();

        buildings.forEach(building => {
            const [buildingName, maxApartment, startApartment = 1] = building;
            html += this.generateBuildingApartments(apartmentNumber, buildingName, maxApartment, startApartment, streetName);
        });

        return html;
    }

    getResultsHeader() {
        return `
            <button type="button" onclick="listStreets()" class="btn btn-primary">Вернуться</button> 
            <button type="button" onclick="copyDivToClipboard()" class="btn btn-secondary">Копировать</button>
            <hr>
            <span id="territory-count"></span><br>
        `;
    }

    generateBuildingApartments(apartmentNumber, buildingName, maxApartment, startApartment, streetName) {
        let html = '';
        let currentApartment = apartmentNumber;
        let hasApartments = false;

        while (currentApartment <= maxApartment) {
            if (currentApartment >= startApartment) {
                if (!hasApartments) {
                    html += `<br><b>${streetName} ${buildingName}</b><br>`;
                    hasApartments = true;
                }
                html += `${currentApartment}<br>`;
                this.apartmentCount++;
            }
            currentApartment += 20;
        }

        return html;
    }

    displayResults(html) {
        if (this.apartmentCount === 0) {
            this.showNoResults();
            return;
        }

        document.getElementById("territory").innerHTML = html;

        const countElement = document.getElementById("territory-count");
        if (countElement) {
            countElement.innerHTML = `Всего квартир: ${this.apartmentCount}`;
        }

        window.scrollTo(0, 0);
    }

    showNoResults() {
        document.getElementById("territory").innerHTML = `
            <button type="button" onclick="listStreets()" class="btn btn-primary">Вернуться</button> 
            <hr>Нет подходящих квартир
        `;
    }

    closeModal() {
        closeModal();
    }

    async copyToClipboard() {
        const territoryElement = document.getElementById("territory");

        // Create a clone of the territory element
        const clone = territoryElement.cloneNode(true);

        // Remove buttons from the clone
        const buttons = clone.querySelectorAll('button');
        buttons.forEach(button => button.remove());

        // Remove hr elements
        const hrs = clone.querySelectorAll('hr');
        hrs.forEach(hr => hr.remove());

        // Convert <br> tags to newlines before getting text
        const brElements = clone.querySelectorAll('br');
        brElements.forEach(br => {
            br.replaceWith('\n');
        });
        
        // Convert <b> tags to preserve formatting
        const boldElements = clone.querySelectorAll('b');
        boldElements.forEach(b => {
            const textNode = document.createTextNode(b.textContent);
            b.replaceWith(textNode);
        });
        
        // Get the text and clean up extra whitespace
        let text = clone.textContent || clone.innerText || '';
        text = text.replace(/\n\s*\n\s*\n/g, '\n\n').trim();

        try {
            if (navigator.clipboard && window.isSecureContext) {
                await navigator.clipboard.writeText(text);
            } else {
                // Fallback for older browsers
                this.fallbackCopyToClipboard(text);
            }
        } catch (err) {
            console.error('Failed to copy text:', err);
            this.fallbackCopyToClipboard(text);
        }
    }

    fallbackCopyToClipboard(text) {
        // Create a temporary textarea element
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);

        // Select and copy the text
        textarea.select();
        document.execCommand('copy');

        // Remove the temporary element
        document.body.removeChild(textarea);
    }
}

// Initialize the application when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new TerritoryApp();
});